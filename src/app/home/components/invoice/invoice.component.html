<button nbButton  status="primary" style="float: right;" (click)="openAddModal(AddModal)">Add New Invoice</button>

<table class="table">
  <thead>
    <tr>
      <th>ID</th>
      <th>Invoice Number</th>
      <th>Pharmcy Name</th>
      <th>Invoice Type</th>
      <th>Invoice Date</th>
      <th>Discount</th>
      <th>Total Price</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let iv of Invoices;let i =index">
      <td>{{i +1}}</td>
      <td>{{iv.invoiceNumber}}</td>
      <td>{{iv.pharmcyName}}</td>
      <td>{{iv.invoiceTypeText}}</td>
      <td>{{iv.invoiceDate }}</td>
      <td>{{iv.disCount}}</td>
      <td>{{iv.totalPrice}}</td>

      <td>
        <!-- <button  nbButton status="warning"(click)="openEditModal(EditModal,iv.id)">Edit</button> | -->
        <button  nbButton status="danger" (click)="openDeleteModal(DeleteModal,iv)">Delete</button>
      </td>
    </tr>

  </tbody>

</table>


<ng-template #AddModal let-modal>
  <nb-card>
  <nb-card-header>
    <h4 class="modal-title" id="modal-basic-title">Add Drugs To Stock</h4>

  </nb-card-header>
  <nb-card-body>
    <form [formGroup]="AddForm">

      <div class="row">
        <div class="col-md-6">
          <div class="form-group">

            <label>Date</label>
            <input nbInput placeholder="Pick Date" [nbDatepicker]="dateTimePicker" formControlName="InvoiceDate">
            <nb-datepicker #dateTimePicker></nb-datepicker>
            <span *ngIf="hasError('InvoiceDate', 'required')" style="color: red">Date is required</span>

          </div>
        </div>
        <div class=" col-md-6">

          <div class="form-group">

            <label>Invoice Number</label>

            <nb-form-field>
              <input class="form-control" formControlName="InvoiceNumber" type="text" nbInput fullWidth>
              <span *ngIf="hasError('InvoiceNumber', 'required')" style="color: red">Invoice Number is
                required</span>

            </nb-form-field>

          </div>
        </div>
        <div class=" col-md-6">

          <div class="form-group">

            <label>Pharmcy Name</label>

            <nb-select placeholder="Select Showcase" [(selected)]="selectedPharmcyItem" lass="form-control"
              formControlName="PharmcyId">
              <nb-option value="0">Option empty</nb-option>
              <nb-option *ngFor="let p of Pharmcies" [value]="p.id">{{p.pharmcyName}}</nb-option>
            </nb-select>
            <span *ngIf="hasError('PharmcyId', 'required')" style="color: red">Pharmcy is required</span>

          </div>
        </div>
        <div class="form-group">

          <label> Discount</label>

          <nb-form-field>
            <input class="form-control" formControlName="DisCount" type="text" nbInput fullWidth>
            <span *ngIf="hasError('DisCount', 'required')" style="color: red">Invoice Number is
              required</span>

          </nb-form-field>

        </div>

        <div class=" col-md-6">

          <div class="form-group">

            <label>Invoice Type</label>

            <nb-select placeholder="Select Showcase" [(selected)]="selectedInvoiceTypeItem" lass="form-control"
              formControlName="InvoiceType">
              <nb-option value="0">Option empty</nb-option>
              <nb-option *ngFor="let it of InvoiceType" [value]="it.Value">{{it.Text}}</nb-option>
            </nb-select>

          </div>
        </div>
      </div>

    </form>

  </nb-card-body>

  <nb-card-footer>
   
      <button type="button" nbButton status="success" [disabled]="AddForm.invalid" data-dismiss="modal"
        (click)="Add()">Save</button>

      <button type="button" nbButton status="danger" data-dismiss="modal"
        (click)="modal.dismiss('Cross click')">Cancel</button>

  </nb-card-footer>
</nb-card>
</ng-template>


<ng-template #DeleteModal let-Dmodal>
  <nb-card>
  <nb-card-header>
    <h4 class="modal-title" id="modal-basic-title">Delete</h4>

  </nb-card-header>
  <nb-card-body>
    <div class="row">
   <div class="col-md-8">
     <p class="text-danger">
      confirm to delete this item ?
     </p>
   </div>
    </div>

  </nb-card-body>

  <nb-card-footer>
 
      <button type="button" nbButton status="success" data-dismiss="Dmodal"
        (click)="DeleteInvoice(InvoiceObject)">save</button>

      <button type="button" nbButton status="danger" data-dismiss="Dmodal"
        (click)="Dmodal.dismiss('Cross click')">Cancel</button>

  </nb-card-footer>
</nb-card>
</ng-template>
